<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>24h 行为记录器</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div>
      <h1>24h 行为记录器</h1>
      <p class="sub">点一下就记一条（时间+选项）｜同页看数据表（日/月/季）</p>
    </div>

    <!-- ✅ 这里是正确位置 -->
    <div class="top-actions">
      <button onclick="backupJSON()">备份数据</button>
      <button id="exportCsvBtn">导出CSV</button>
      <button id="clearBtn" class="danger">清空数据</button>
    </div>
  </header>

  <main class="grid">
    <!-- 左：记录 -->
    <section class="card">
      <h2>快速记录</h2>

      <div class="row">
        <label>快捷选项</label>
        <div id="quickButtons" class="chips"></div>
      </div>

      <div class="row">
        <label>自定义选项</label>
        <div class="inline">
          <input id="newCategory" placeholder="例如：学习日语 / 写代码 / 兼职" />
          <button id="addCategoryBtn">添加</button>
        </div>
        <div class="hint">提示：选项会保存。点击任意选项=记录一次。</div>
      </div>

      <div class="row">
        <label>最近记录（最新在上）</label>
        <div id="recentList" class="list"></div>
      </div>
    </section>

    <!-- 右：统计 -->
    <section class="card">
      <h2>统计面板</h2>

      <div class="tabs">
        <button class="tab active" data-tab="day">今天</button>
        <button class="tab" data-tab="month">本月</button>
        <button class="tab" data-tab="quarter">本季度</button>
      </div>

      <div class="panel">
        <div class="filters">
          <div class="field">
            <label>基准日期</label>
            <input type="date" id="baseDate" />
          </div>
          <div class="field">
            <label>显示Top</label>
            <select id="topN">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="50">50</option>
            </select>
          </div>
        </div>

        <div class="summary" id="summary"></div>

        <h3>分类汇总表</h3>
        <div class="table-wrap">
          <table id="summaryTable">
            <thead>
              <tr>
                <th>分类</th>
                <th>次数</th>
                <th>占比</th>
                <th>最近一次</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <h3>时间线（原始记录）</h3>
        <div class="table-wrap">
          <table id="rawTable">
            <thead>
              <tr>
                <th>时间</th>
                <th>分类</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    数据只保存在本机浏览器（localStorage）。如果换设备/清缓存，数据会消失。
  </footer>

  <script src="app.js"></script>
</body>
</html>